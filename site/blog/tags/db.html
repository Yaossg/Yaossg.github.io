<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">One post tagged with &quot;db&quot; | Yaossg&#x27;s Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://yaossg.com/site/blog/tags/db"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="One post tagged with &quot;db&quot; | Yaossg&#x27;s Site"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/site/img/sausage.png"><link data-rh="true" rel="canonical" href="https://yaossg.com/site/blog/tags/db"><link data-rh="true" rel="alternate" href="https://yaossg.com/site/blog/tags/db" hreflang="en"><link data-rh="true" rel="alternate" href="https://yaossg.com/site/blog/tags/db" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/site/blog/rss.xml" title="Yaossg&#39;s Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/site/blog/atom.xml" title="Yaossg&#39;s Site Atom Feed">




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/site/assets/css/styles.1161ec3e.css">
<link rel="preload" href="/site/assets/js/runtime~main.83ecb64e.js" as="script">
<link rel="preload" href="/site/assets/js/main.bd3cc401.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/site/"><div class="navbar__logo"><img src="/site/img/sausage-128.png" alt="Yaossg&#x27;s Site" class="themedImage_ToTc themedImage--light_HNdA"><img src="/site/img/sausage-128.png" alt="Yaossg&#x27;s Site" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Yaossg&#x27;s Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/site/blog">Blog</a><a class="navbar__item navbar__link" href="/site/docs">Doc</a><a class="navbar__item navbar__link" href="/site/friends">Friends</a></div><div class="navbar__items navbar__items--right"><a href="https://space.bilibili.com/282144386" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Bilibili<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/Yaossg/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/site/blog/db-speedrun">速通数据库</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/site/blog/simd">&lt;experimental/simd&gt; 初体验</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/site/blog/statistics">速通统计学</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/site/blog/sso">SSO? SOS!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/site/blog/algebraic-structure">代数结构：群、环、域</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>One post tagged with &quot;db&quot;</h1><a href="/site/blog/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/site/blog/db-speedrun">速通数据库</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-05-27T18:13:45.000Z" itemprop="datePublished">May 27, 2023</time> · <!-- -->17 min read</div></header><div class="markdown" itemprop="articleBody"><ul><li>DBS 数据库系统</li><li>DB 数据库</li><li>DBMS 数据库管理系统</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="数据模型">数据模型<a href="#数据模型" class="hash-link" aria-label="Direct link to 数据模型" title="Direct link to 数据模型">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="三要素">三要素<a href="#三要素" class="hash-link" aria-label="Direct link to 三要素" title="Direct link to 三要素">​</a></h3><ul><li>数据结构</li><li>数据操作</li><li>数据完整性（约束条件）</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="三种模型">三种模型<a href="#三种模型" class="hash-link" aria-label="Direct link to 三种模型" title="Direct link to 三种模型">​</a></h3><ul><li>层次型</li><li>网状型</li><li>关系型</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="三层模型">三层模型<a href="#三层模型" class="hash-link" aria-label="Direct link to 三层模型" title="Direct link to 三层模型">​</a></h3><ul><li>概念模型：E-R图</li><li>逻辑模型：<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>A</mi><mo separator="true">,</mo><mi>B</mi><mo separator="true">,</mo><mi>C</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(A,B,C)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.00773em">R</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.07153em">C</span><span class="mclose">)</span></span></span></span></span></li><li>物理模型：主键、外键、索引等</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="三级模式">三级模式<a href="#三级模式" class="hash-link" aria-label="Direct link to 三级模式" title="Direct link to 三级模式">​</a></h3><ul><li>外模式（用户模式）：视图、可以有多个</li><li>模式（逻辑模式）：表结构</li><li>内模式（存储模式）：数据结构</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="两级独立性">两级独立性<a href="#两级独立性" class="hash-link" aria-label="Direct link to 两级独立性" title="Direct link to 两级独立性">​</a></h3><ul><li>逻辑独立：外模式与模式独立</li><li>物理独立：模式与内模式独立</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="四种语言">四种语言<a href="#四种语言" class="hash-link" aria-label="Direct link to 四种语言" title="Direct link to 四种语言">​</a></h3><ul><li>DDL 数据定义语言 CREATE DROP ALTER</li><li>DML 数据操纵语言 INSERT UPDATE DELETE</li><li>DCL 数据控制语言 GRANT REVOKE</li><li>TCL 事务控制语言 COMMIT ROLLBACK CHECKPOINT</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="关系代数">关系代数<a href="#关系代数" class="hash-link" aria-label="Direct link to 关系代数" title="Direct link to 关系代数">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="key">Key<a href="#key" class="hash-link" aria-label="Direct link to Key" title="Direct link to Key">​</a></h3><p>键，码（Key）：唯一区分不同元组的属性或属性组合。</p><p>一个关系可以有多个候选键（Candidate Key），选定其中一个作为主键（Primary Key）。</p><p>候选键的属性称为主属性。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="除法">除法<a href="#除法" class="hash-link" aria-label="Direct link to 除法" title="Direct link to 除法">​</a></h3><p><img loading="lazy" src="/site/assets/images/division-a59bc0d79bdae3f76e02004b8f60ad89.png" width="1241" height="698" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="数据库设计">数据库设计<a href="#数据库设计" class="hash-link" aria-label="Direct link to 数据库设计" title="Direct link to 数据库设计">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="新奥尔良设计法">新奥尔良设计法<a href="#新奥尔良设计法" class="hash-link" aria-label="Direct link to 新奥尔良设计法" title="Direct link to 新奥尔良设计法">​</a></h3><ul><li>需求分析</li><li>概念设计</li><li>逻辑设计</li><li>物理设计</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="e-r-图">E-R 图<a href="#e-r-图" class="hash-link" aria-label="Direct link to E-R 图" title="Direct link to E-R 图">​</a></h3><ul><li><p>方形：实体</p></li><li><p>圆形：属性</p></li><li><p>菱形：关系</p></li><li><p>一对一 1:1，与任一端的关系模式合并</p></li><li><p>一对多 1:n，与n端的关系模式合并</p></li><li><p>多对多 m:n，转为单独的一个关系模式</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="物理设计">物理设计<a href="#物理设计" class="hash-link" aria-label="Direct link to 物理设计" title="Direct link to 物理设计">​</a></h3><p>数据存放位置、系统配置、聚簇、索引、HASH</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="函数依赖">函数依赖<a href="#函数依赖" class="hash-link" aria-label="Direct link to 函数依赖" title="Direct link to 函数依赖">​</a></h3><p>如果 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.07847em">X</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.22222em">Y</span></span></span></span></span>，但是不存在 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>X</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>⊂</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">X&#x27; \subset X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.791em;vertical-align:-0.0391em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">⊂</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.07847em">X</span></span></span></span></span> 使得 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>X</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X&#x27;\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.22222em">Y</span></span></span></span></span>，成为完全依赖，记作<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo><mover><mo><mo>→</mo></mo><mi>f</mi></mover></mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\stackrel{f}{\rightarrow} Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2001em"></span><span class="mord mathnormal" style="margin-right:0.07847em">X</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel"><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.2001em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span><span class="mop">→</span></span></span><span style="top:-3.614em;margin-left:0em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em">f</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.22222em">Y</span></span></span></span></span>，否则称为部分依赖。</p><p>属性或属性集 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.07153em">K</span></span></span></span></span> 和它所在的关系模式 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>U</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(U)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.00773em">R</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em">U</span><span class="mclose">)</span></span></span></span></span> 满足 $ K\stackrel{f}{\rightarrow} U$ 则 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.07153em">K</span></span></span></span></span> 为候选码。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="模式分解">模式分解<a href="#模式分解" class="hash-link" aria-label="Direct link to 模式分解" title="Direct link to 模式分解">​</a></h3><p>设 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mn>1</mn></msub><mo stretchy="false">(</mo><msub><mi>U</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo separator="true">,</mo><msub><mi>R</mi><mn>2</mn></msub><mo stretchy="false">(</mo><msub><mi>U</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">{R_1(U_1), R_2(U_2)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></span> 是关系模式 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.00773em">R</span></span></span></span></span> 的一个分解，则它是无损分解的充分必要条件是：</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>U</mi><mn>1</mn></msub><mo>∩</mo><msub><mi>U</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>→</mo><mo stretchy="false">(</mo><msub><mi>U</mi><mn>1</mn></msub><mo>−</mo><msub><mi>U</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>∨</mo><mo stretchy="false">(</mo><msub><mi>U</mi><mn>1</mn></msub><mo>∩</mo><msub><mi>U</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>→</mo><mo stretchy="false">(</mo><msub><mi>U</mi><mn>2</mn></msub><mo>−</mo><msub><mi>U</mi><mn>1</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(U_1\cap U_2)\rightarrow(U_1-U_2) \lor (U_1\cap U_2)\rightarrow(U_2-U_1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">∨</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="规范化">规范化<a href="#规范化" class="hash-link" aria-label="Direct link to 规范化" title="Direct link to 规范化">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1nf">1NF<a href="#1nf" class="hash-link" aria-label="Direct link to 1NF" title="Direct link to 1NF">​</a></h4><p>每个属性不能再分</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2nf">2NF<a href="#2nf" class="hash-link" aria-label="Direct link to 2NF" title="Direct link to 2NF">​</a></h4><p>1NF，且每个非主属性完全函数依赖于候选码</p><p>单码、全码、二元关系一定是 2NF</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3nf">3NF<a href="#3nf" class="hash-link" aria-label="Direct link to 3NF" title="Direct link to 3NF">​</a></h4><p>1NF，且每个非主属性都不传递依赖于候选码</p><p>定理：如果是 3NF，必然是 2NF</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bcnf">BCNF<a href="#bcnf" class="hash-link" aria-label="Direct link to BCNF" title="Direct link to BCNF">​</a></h4><p>1NF，且每个属性都不传递依赖于候选码</p><p>属于BCNF的模式：</p><ul><li>所有非主属性对每一个码都是完全函数依赖</li><li>所有的主属性对每一个不包含它的码也是完全函数依赖</li><li>没有任何属性完全函数依赖于非码的任何一组属性</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sql">SQL<a href="#sql" class="hash-link" aria-label="Direct link to SQL" title="Direct link to SQL">​</a></h2><p>略</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="事务并发">事务并发<a href="#事务并发" class="hash-link" aria-label="Direct link to 事务并发" title="Direct link to 事务并发">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="事务">事务<a href="#事务" class="hash-link" aria-label="Direct link to 事务" title="Direct link to 事务">​</a></h3><p>事务（transaction）：要么都做要么都不做。特点 ACID：</p><ul><li>原子性（Atomicity）事务所有操作要么都做要么都不做，由事务管理部件处理</li><li>一致性（Consistency）事务完成时，数据有一致的状态，由应用开发人员保证</li><li>隔离性（Isolation）事务并发执行时，不能互相干扰，由并发控制部件处理</li><li>持续性（Durability）事务一旦提交便是永久的，无论有无故障，由恢复管理部件负责</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="四种并发错误">四种并发错误<a href="#四种并发错误" class="hash-link" aria-label="Direct link to 四种并发错误" title="Direct link to 四种并发错误">​</a></h3><ul><li>丢失更新</li><li>读脏数据：读到未提交的数据</li><li>不可重复读：两次读到的同一行不一致，如某行的字段不同</li><li>幻读：两次读到的同一表不一致，如某表的行数不同</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="四种隔离级别">四种隔离级别<a href="#四种隔离级别" class="hash-link" aria-label="Direct link to 四种隔离级别" title="Direct link to 四种隔离级别">​</a></h3><ul><li>读未提交</li><li>读已提交：一个事务要等另一个事务提交后才能再读取数据</li><li>重复读：一个事务开始读取数据后，不再允许其它事务修改数据</li><li>序列化：事务串行化顺序执行</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="可串行化调度">可串行化调度<a href="#可串行化调度" class="hash-link" aria-label="Direct link to 可串行化调度" title="Direct link to 可串行化调度">​</a></h3><p>可串行化调度：多个事务交叉调度的结果与某一个串行调度的结果相同。</p><p>一个调度如果是可串行化的，系统认为其调度是一个正确的调度，保持了数据库的一致性。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="简记符号">简记符号<a href="#简记符号" class="hash-link" aria-label="Direct link to 简记符号" title="Direct link to 简记符号">​</a></h4><ul><li>WRITE 简写为 W</li><li>READ 简写为 R</li><li>WT(X)：事务 T 写数据库元素 X</li><li>RT(X)：事务 T 读数据库元素 X</li></ul><p>S 表示一个调度。如 S = R1(A) R2(A) W1(A) W2(A) R2(B) R1(B) W2(B) W1(B)</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="冲突可串行化">冲突可串行化<a href="#冲突可串行化" class="hash-link" aria-label="Direct link to 冲突可串行化" title="Direct link to 冲突可串行化">​</a></h4><p>两个事务，</p><ul><li><p>读相同数据的指令、读不同数据的指令不是冲突的。</p></li><li><p>读、写相同数据的指令，即 Ri(A) 和 Wj(A) 指令是冲突的。</p></li><li><p>写相同数据的指令，即 Wi(A) 和 Wj(A) 指令是冲突的。</p></li></ul><p>若调度 S 中属于不同事务的两条操作指令是不冲突的，则可以交换两条指令的执行顺序，得到一个新的调度 S′。称调度 S 与调度 S′ 冲突等价的（conflict equivalent）。若一个调度冲突等价于一个串行调度，则该调度是冲突可串行化的。</p><p>冲突可串行是可串行性的充分条件。</p><p>冲突可串行化判定：前驱图（precedence graph）</p><ul><li>前驱图是一个有向图 G</li><li>顶点代表调度 S 中的事务</li><li>由 Ti→Tj 的边表示在调度 S 中 Ti 和 Tj 之间存在一对冲突指令，并且 Ti 中的指令先于 Tj 中的指令执行。</li><li>若前驱图中存在环，则表示调度 S 是不可串行化的。</li><li>反之，若前驱图中不存在环，表示调度 S 是冲突可串行化的，可用拓扑排序得到调度 S 的一个等价的串行调度。</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="视图可串行化">视图可串行化<a href="#视图可串行化" class="hash-link" aria-label="Direct link to 视图可串行化" title="Direct link to 视图可串行化">​</a></h4><p>对同一事务集，如果两个调度 S1 和 S2 在任何时候都保证每个事务读取相同的值，写入数据库的最终状态也是一样的，则称调度 S1 和 S2 视图等价。</p><p>如果某个调度视图等价于一个串行调度，则称这个调度是视图可串行化的。</p><p>如果调度是冲突可串行化的，则该调度一定是视图可串行化的。反之未必成立。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="锁">锁<a href="#锁" class="hash-link" aria-label="Direct link to 锁" title="Direct link to 锁">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="三种锁">三种锁<a href="#三种锁" class="hash-link" aria-label="Direct link to 三种锁" title="Direct link to 三种锁">​</a></h4><table><thead><tr><th></th><th>权限</th><th>申请</th><th>升级</th></tr></thead><tbody><tr><td>共享锁 S</td><td>读</td><td>没有排他锁即可申请</td><td>需要等待其它共享锁释放后才能升级为排它锁</td></tr><tr><td>更新锁 U</td><td>读</td><td>没有锁才能申请</td><td>无须等待其它共享锁释放，直接升级为排它锁</td></tr><tr><td>排它锁 X</td><td>读、写</td><td>没有锁才能申请</td><td></td></tr></tbody></table><p>锁申请是有队列的，先来后到。</p><p>更新锁的含义是：该资源稍后更新</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="三级封锁">三级封锁<a href="#三级封锁" class="hash-link" aria-label="Direct link to 三级封锁" title="Direct link to 三级封锁">​</a></h4><ul><li>一级封锁：修改数据加X锁直到事务结束才释放</li><li>二级封锁：在一级封锁的基础上，加了一条：T事务在读取数据R之前必须先对其加上S锁，读完释放S锁</li><li>三级封锁：一级封锁协议加上事务T在读取数据R之前必须先对其加S锁，直到事务结束才释放</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="两段锁协议">两段锁协议<a href="#两段锁协议" class="hash-link" aria-label="Direct link to 两段锁协议" title="Direct link to 两段锁协议">​</a></h4><p>两段锁协议</p><ul><li>所有事务分两个阶段提出加锁和解锁申请。</li><li>增长阶段：在对任何数据进行读、写操作之前，首先申请并获得该数据的封锁。</li><li>收缩阶段：在释放一个封锁后，事务不再申请和获得其它的任何封锁。</li><li>两段锁协议是保证冲突可串行化的充分条件，但该协议不保证不发生死锁。</li></ul><p>严格两阶段锁</p><ul><li>除要求满足两段锁协议规定外，还要求事务的排它锁必须在事务提交之后释放。</li><li>解决级联回滚问题。</li></ul><p>强两阶段锁</p><ul><li>除要求满足两段锁协议规定外，还要求事务的所有锁都必须在事务提交之后释放。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="故障恢复">故障恢复<a href="#故障恢复" class="hash-link" aria-label="Direct link to 故障恢复" title="Direct link to 故障恢复">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="日志">日志<a href="#日志" class="hash-link" aria-label="Direct link to 日志" title="Direct link to 日志">​</a></h3><p>日志记录形式</p><ul><li><code>&lt;T START&gt;</code>：事务T开始</li><li><code>&lt;T COMMIT&gt;</code>：事务T提交</li><li><code>&lt;T ABORT&gt;</code>：事务T不能成功完成，已中止</li><li><code>&lt;T,X,V1,V2&gt;</code>：事务T对数据项X执行写操作，写之前的旧值为V1，写之后的新值为V2</li></ul><p>事务执行写操作，必须在数据库修改前记录此次操作的日志</p><ul><li>在T开始执行前，向日志中写入记录<code>&lt;T START&gt;</code></li><li>T的一次write(X)操作导致向日志中写入一条新记录</li><li>最后，当T全部操作结束，向日志中写入记录<code>&lt;T COMMIT&gt;</code></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="后像后写">后像后写<a href="#后像后写" class="hash-link" aria-label="Direct link to 后像后写" title="Direct link to 后像后写">​</a></h4><ul><li>从后向前扫描日志，将已提交的事务放入redo-list队列</li><li>从前向后扫描日志，每遇到一个<code>&lt;T,X,V2&gt;</code>记录（只需要存新值）<ul><li>如果T不在redo-list中，则什么也不做</li><li>如果T在redo-list中的事务，则为数据项X写入新值V2</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="后像前写">后像前写<a href="#后像前写" class="hash-link" aria-label="Direct link to 后像前写" title="Direct link to 后像前写">​</a></h4><ul><li>从后向前扫描日志，将已提交的事务放入redo-list队列</li><li>从前向后扫描日志，每遇到一个<code>&lt;T,X,V1&gt;</code>记录（只需要存旧值）<ul><li>如果T在redo-list中，则什么也不做</li><li>如果T不在redo-list中的事务，则为数据项X写入旧值V1</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="后像前后写">后像前后写<a href="#后像前后写" class="hash-link" aria-label="Direct link to 后像前后写" title="Direct link to 后像前后写">​</a></h4><ul><li>首先对日志文件从后向前进行扫描，将有<code>&lt;T COMMIT&gt;</code>记录和没有<code>&lt;T COMMIT&gt;</code>记录的事务分别放入两个队列：redo-list队列，undo-list队列</li><li>从前向后再次扫描日志记录，重新执行redo-list队列中的事务</li><li>从后向前再次扫描日志记录，撤销undo-list队列中的事务</li></ul><p>无论是哪一种方案，对每个未完成的事务，需要在日志中写入一个<code>&lt;T ABORT&gt;</code>记录并刷新日志。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="检查点">检查点<a href="#检查点" class="hash-link" aria-label="Direct link to 检查点" title="Direct link to 检查点">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="提交一致性检查点">提交一致性检查点<a href="#提交一致性检查点" class="hash-link" aria-label="Direct link to 提交一致性检查点" title="Direct link to 提交一致性检查点">​</a></h4><ul><li>新的事务不能开始直到检查点完成</li><li>现有的事务继续执行直到提交或中止，并且相关数据都写入稳定存储器</li><li>将当前日志缓冲区中的日志记录写回稳定存储器中的日志文件</li><li>将日志记录<code>&lt;checkpoint&gt;</code>写入稳定存储器</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="高速缓存一致性检查点">高速缓存一致性检查点<a href="#高速缓存一致性检查点" class="hash-link" aria-label="Direct link to 高速缓存一致性检查点" title="Direct link to 高速缓存一致性检查点">​</a></h4><ul><li>新的事务不能开始直到检查点完成</li><li>已存在的事务不允许执行新的更新操作，如写缓冲块或写日志记录</li><li>将当前日志缓冲区中的日志记录写回稳定存储器中的日志文件</li><li>将当前数据缓冲区中的所有数据记录写入磁盘</li><li>将日志记录<code>&lt;checkpoint，L&gt;</code>写入稳定存储器，其中L是所有活动事务的列表</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="数据转储">数据转储<a href="#数据转储" class="hash-link" aria-label="Direct link to 数据转储" title="Direct link to 数据转储">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="静态动态">静态/动态<a href="#静态动态" class="hash-link" aria-label="Direct link to 静态/动态" title="Direct link to 静态/动态">​</a></h4><ul><li>静态转储：在系统中无运行事务时进行转储，转储期间不允许对数据库的任何存取、修改活动</li><li>动态转储：转储操作与用户事务并发进行，转储期间允许对数据库进行存取或修改</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="完全增量">完全/增量<a href="#完全增量" class="hash-link" aria-label="Direct link to 完全/增量" title="Direct link to 完全/增量">​</a></h4><ul><li>完全转储：每次转储全部数据库</li><li>增量转储：只转储上次转储后更新过的数据</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="故障恢复-1">故障恢复<a href="#故障恢复-1" class="hash-link" aria-label="Direct link to 故障恢复" title="Direct link to 故障恢复">​</a></h3><ul><li>事务故障：利用日志故障恢复，详见上文。</li><li>系统故障：利用日志故障恢复，详见上文。</li><li>介质故障：<ul><li>装入最近的完全转储后备副本</li><li>如果有后续的增量转储，按照从前往后的顺序，根据增量转储来修改数据库</li><li>装入转储结束后的日志文件副本，重做已完成的事务<ul><li>首先反向扫描日志文件，找出故障发生时已经提交的事务，将事务标识符写入redo-list</li><li>然后正向扫描日志文件，对redo-list中的所有事务进行redo操作</li></ul></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="数据库安全">数据库安全<a href="#数据库安全" class="hash-link" aria-label="Direct link to 数据库安全" title="Direct link to 数据库安全">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="自主访问控制dac">自主访问控制（DAC）<a href="#自主访问控制dac" class="hash-link" aria-label="Direct link to 自主访问控制（DAC）" title="Direct link to 自主访问控制（DAC）">​</a></h3><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- 授予权限</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">权限</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">表或视图</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">用户</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">OPTION</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- 收回权限</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">REVOKE</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">OPTION</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FOR</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">权限</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">表或视图</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">用户</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">RESTRICT</span><span class="token operator" style="color:#393A34">|</span><span class="token keyword" style="color:#00009f">CASCADE</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- 基于角色授权（RBAC）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> ROLE Admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> Admin </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">用户</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">Table</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> Admin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="强制访问控制mac">强制访问控制（MAC）<a href="#强制访问控制mac" class="hash-link" aria-label="Direct link to 强制访问控制（MAC）" title="Direct link to 强制访问控制（MAC）">​</a></h3><ul><li>对所有主体（系统中的活动实体，如用户）及其所控制的客体（如进程、文件、基表、视图等）实施强制访问控制</li><li>每一个数据对象被标以一定的密级，每一个用户也被授予某一个级别的许可证，对于任意一个对象，只有具有合法许可证的用户才可以存取</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="敏感度标记label">敏感度标记（Label）<a href="#敏感度标记label" class="hash-link" aria-label="Direct link to 敏感度标记（Label）" title="Direct link to 敏感度标记（Label）">​</a></h4><ul><li>对于主体和客体，DBMS为它们每个实例（值）指派一个敏感度标记</li><li>敏感度标记级别：绝密，机密， 可信，公开</li><li>主体的敏感度标记称为许可证级别，客体的敏感度标记称为密级</li><li>MAC机制就是通过对比主体的Label和客体的Label，最终确定主体是否能够存取客体</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="强制存取控制规则">强制存取控制规则<a href="#强制存取控制规则" class="hash-link" aria-label="Direct link to 强制存取控制规则" title="Direct link to 强制存取控制规则">​</a></h4><ul><li>仅当主体的许可证级别大于或等于客体的密级时，该主体才能读取相应的客体</li><li>仅当主体的许可证级别小于或等于客体的密级时，该主体才能写相应的客体</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="审计">审计<a href="#审计" class="hash-link" aria-label="Direct link to 审计" title="Direct link to 审计">​</a></h3><ul><li>启用一个专用的审计日志（Audit Log）， 将用户对数据库的所有操作记录在上面</li><li>DBA可以利用审计日志中的追踪信息，找出非法存取数据的人</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/site/blog/tags/db">db</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"></nav></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Quick Access</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://yaossg.com/end-poem/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Online End Poem<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/Yaossg/site" target="_blank" rel="noopener noreferrer" class="footer__link-item">Site Source Code<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Related Sites</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Powered By Docusaurus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://afdian.net/a/Yaossg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Support Me Via Afdian<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Yaossg's Site</div></div></div></footer></div>
<script src="/site/assets/js/runtime~main.83ecb64e.js"></script>
<script src="/site/assets/js/main.bd3cc401.js"></script>
</body>
</html>